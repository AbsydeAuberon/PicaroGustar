//check if we reached the end of the animation 

ableToMove=0;

if (IsAnimationFinished())
{
    nextState=0;
}
